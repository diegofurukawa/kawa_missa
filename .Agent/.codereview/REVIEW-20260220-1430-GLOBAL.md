# REVIS√ÉO GLOBAL DE C√ìDIGO ‚Äî KAWA MISSA
**Data:** 2026-02-20 14:30  
**Escopo:** Projeto Inteiro (HEAD)  
**Modo:** Somente Leitura  
**Auditor:** AGENT_CODE_REVIEWER v2

---

## üìã SUM√ÅRIO EXECUTIVO

Revis√£o t√©cnica global do projeto Kawa Missa identificou **14 problemas acion√°veis** distribu√≠dos em 4 n√≠veis de severidade. O projeto est√° **pronto para produ√ß√£o com ressalvas cr√≠ticas** ‚Äî bugs de data/hora e configura√ß√£o de banco devem ser corrigidos antes de escalar.

**Estat√≠sticas:**
- ‚úÖ Arquitetura: S√≥lida (multi-tenancy, Server Components, separa√ß√£o clara)
- ‚ö†Ô∏è Bugs Cr√≠ticos: 3 (data/hora, Prisma WASM, valida√ß√£o de config)
- ‚ö†Ô∏è D√©bito T√©cnico: 5 (type safety, fun√ß√µes incorretas, race conditions)
- ‚ö†Ô∏è UX/Performance: 6 (mobile, carrossel, auto-save, testes)

---

## üö® PROBLEMAS CR√çTICOS

### CR-001: Bug de Data/Hora ‚Äî Exibi√ß√£o com -3h em Produ√ß√£o

**SEVERIDADE:** CR√çTICA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `lib/date-utils.ts`
- Linhas: 241-310 (fun√ß√µes `formatDateTimeUTC`, `getWeekdayUTC`, `formatLongDateTimeUTC`, `formatDateOnlyUTC`)
- Uso: `app/ui/dashboard/mass-carousel.tsx` linhas 115, 128

**PROBLEMA:**
Fun√ß√µes de formata√ß√£o usam `getUTC*()` (m√©todos UTC) ao inv√©s de `get*()` (m√©todos locais). Resultado: carrossel exibe hor√°rio UTC ao inv√©s de hor√°rio local (Bras√≠lia UTC-3). Exemplo: missa √†s 08:30 exibe como 11:30.

**Verifica√ß√£o:**
```typescript
// ERRADO (linha 241):
const hours = String(d.getUTCHours()).padStart(2, '0');  // L√™ UTC

// CORRETO:
const hours = String(d.getHours()).padStart(2, '0');  // L√™ local
```

**A√á√ÉO EXIGIDA:**
1. Substituir em `formatDateTimeUTC()`: `getUTC*()` ‚Üí `get*()`
2. Substituir em `getWeekdayUTC()`: `getUTCDay()` ‚Üí `getDay()`
3. Substituir em `formatLongDateTimeUTC()`: `getUTC*()` ‚Üí `get*()`
4. Substituir em `formatDateOnlyUTC()`: `getUTC*()` ‚Üí `get*()`
5. Validar que `mass-carousel.tsx` usa essas fun√ß√µes corrigidas
6. Testar: criar missa √†s 08:30 ‚Üí carrossel deve exibir 08:30 (n√£o 11:30)

**IMPACTO:**
- T√©cnico: Dados incorretos em produ√ß√£o
- Operacional: Usu√°rios veem hor√°rios errados
- Cr√≠tico: Afeta confiabilidade do sistema

---

### CR-002: Prisma WASM em Standalone Mode ‚Äî Build Pode Falhar

**SEVERIDADE:** CR√çTICA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `next.config.ts` linha 7
- Arquivo: `Dockerfile` linhas 75-78
- Refer√™ncia: `.Stack.md` se√ß√£o "Build Failures"

**PROBLEMA:**
`output: "standalone"` est√° comentado no `next.config.ts` porque Prisma 7 WASM n√£o funciona em standalone mode. Dockerfile tenta copiar WASM manualmente (linhas 75-78), mas:
1. C√≥pia manual √© fr√°gil (pode falhar silenciosamente)
2. Documenta√ß√£o n√£o menciona esse workaround
3. Build pode falhar se WASM n√£o for copiado corretamente

**Verifica√ß√£o:**
```typescript
// next.config.ts linha 7:
// output: "standalone",  // COMENTADO ‚Äî por qu√™?
```

**A√á√ÉO EXIGIDA:**
1. Documentar explicitamente em `next.config.ts` por que `standalone` est√° desabilitado
2. Adicionar coment√°rio: "Prisma 7 WASM incompat√≠vel com standalone. Usar output padr√£o."
3. Validar que Dockerfile copia WASM corretamente (verificar linhas 75-78)
4. Adicionar verifica√ß√£o de build: `npm run build && npm run start` deve funcionar
5. Documentar em `.Stack.md` se√ß√£o "Build Failures" o workaround exato

**IMPACTO:**
- T√©cnico: Build pode falhar em CI/CD
- Operacional: Deployment quebrado
- Cr√≠tico: Bloqueia produ√ß√£o

---

### CR-003: Configura√ß√£o de Banco Sem Valida√ß√£o ‚Äî Falha Silenciosa em Docker

**SEVERIDADE:** CR√çTICA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `lib/prisma.ts` linhas 20-50
- Arquivo: `prisma.config.ts` linhas 1-30

**PROBLEMA:**
Configura√ß√£o de banco n√£o valida se `DB_HOST` √© v√°lido. Fallback para `localhost` pode mascarar erros em Docker. Exemplo: se `DB_HOST` n√£o for definido, Prisma tenta conectar a `localhost` (que n√£o existe em Docker), causando erro gen√©rico sem indicar o problema real.

**Verifica√ß√£o:**
```typescript
// lib/prisma.ts linha 30:
const dbHost = process.env.DB_HOST;  // Sem valida√ß√£o

// Sem DB_HOST, fallback silencioso para localhost
const url = `postgresql://${dbUser}:${dbPassword}@${dbHost}:${dbPort}/${dbName}`;
// Resultado: postgresql://postgres:@localhost:5432/kawa_missa
```

**A√á√ÉO EXIGIDA:**
1. Adicionar valida√ß√£o expl√≠cita em `lib/prisma.ts`:
   - Se `DB_HOST` n√£o definido E `DATABASE_URL` inv√°lido ‚Üí throw erro com mensagem clara
   - Mensagem deve indicar: "DB_HOST deve estar configurado. Verifique .env ou docker-compose.yml"
2. Adicionar valida√ß√£o em `prisma.config.ts` (se usado em build-time)
3. Adicionar teste: `npm run build` com `DB_HOST` vazio deve falhar com mensagem clara
4. Documentar em `.env.example` que `DB_HOST` √© obrigat√≥rio

**IMPACTO:**
- T√©cnico: Erro gen√©rico sem contexto
- Operacional: Dif√≠cil debugar em produ√ß√£o
- Cr√≠tico: Falha silenciosa em Docker

---

## ‚ö†Ô∏è PROBLEMAS ALTOS

### CR-004: Fun√ß√£o `utcToLocal()` com L√≥gica Invertida ‚Äî Technical Debt

**SEVERIDADE:** ALTA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `lib/date-utils.ts` linhas 91-100
- Status: N√£o est√° sendo usada atualmente

**PROBLEMA:**
Fun√ß√£o `utcToLocal()` tem l√≥gica de offset invertida. N√£o est√° sendo usada, mas representa technical debt que pode causar bugs futuros.

**Verifica√ß√£o:**
```typescript
// lib/date-utils.ts linha 91-100:
export function utcToLocal(utcDate: Date): Date {
    const offset = utcDate.getTimezoneOffset() * 60000;
    return new Date(utcDate.getTime() + offset);  // ERRADO: soma ao inv√©s de subtrair
}
```

**A√á√ÉO EXIGIDA:**
1. Remover fun√ß√£o `utcToLocal()` (n√£o est√° sendo usada)
2. Se necess√°ria no futuro, implementar corretamente:
   ```typescript
   export function utcToLocal(utcDate: Date): Date {
       const offset = utcDate.getTimezoneOffset() * 60000;
       return new Date(utcDate.getTime() - offset);  // Subtrair offset
   }
   ```
3. Adicionar coment√°rio: "Fun√ß√£o removida ‚Äî usar `new Date(year, month-1, day, hours, minutes)` para criar datas locais"

**IMPACTO:**
- T√©cnico: Technical debt
- Operacional: Risco de bugs futuros
- M√©dio: N√£o afeta produ√ß√£o atual

---

### CR-005: Type Safety Violada ‚Äî Campo `config?: any` no Carrossel

**SEVERIDADE:** ALTA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `app/ui/dashboard/mass-carousel.tsx` linha 21
- Refer√™ncia: `.CodeConventions.md` se√ß√£o 12 (TypeScript strict mode)

**PROBLEMA:**
Campo `config?: any` viola strict TypeScript. Perda de type checking em opera√ß√µes com `config`.

**Verifica√ß√£o:**
```typescript
// mass-carousel.tsx linha 21:
interface MassCarouselProps {
    config?: any;  // ERRADO: any type
}
```

**A√á√ÉO EXIGIDA:**
1. Definir tipo correto para `config`:
   ```typescript
   interface Config {
       id: string;
       cronConfig: Record<string, unknown>;
       participantConfig: { roles?: [string, number][] };
   }
   
   interface MassCarouselProps {
       config?: Config;
   }
   ```
2. Atualizar uso de `config` no componente com type safety
3. Validar que `mass-carousel.tsx` compila sem erros

**IMPACTO:**
- T√©cnico: Perda de type checking
- Operacional: Risco de erros em runtime
- M√©dio: Viola√ß√£o de conven√ß√£o

---

### CR-006: Descri√ß√£o de Missa Obrigat√≥ria ‚Äî Fric√ß√£o Desnecess√°ria

**SEVERIDADE:** ALTA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `prisma/schema.prisma` linha 52: `description String`
- Arquivo: `lib/actions.ts` linha 340: `description: z.string().min(1, ...)`
- Arquivo: `app/ui/masses/create-form.tsx` linha 350

**PROBLEMA:**
Campo `description` √© obrigat√≥rio (NOT NULL no banco, `.min(1)` no Zod). Cria fric√ß√£o desnecess√°ria para missas simples que n√£o precisam de descri√ß√£o.

**Verifica√ß√£o:**
```prisma
// schema.prisma linha 52:
description String  // NOT NULL ‚Äî obrigat√≥rio
```

**A√á√ÉO EXIGIDA:**
1. Criar migration: `npx prisma migrate dev --name make_description_optional`
2. Atualizar schema: `description String?` (nullable)
3. Atualizar Zod schema em `lib/actions.ts`:
   ```typescript
   description: z.string().optional().nullable()
   ```
4. Remover asterisco (*) de campo obrigat√≥rio em forms
5. Atualizar label: "Descri√ß√£o (opcional)"
6. Testar: criar missa sem descri√ß√£o deve funcionar

**IMPACTO:**
- T√©cnico: Migration necess√°ria
- Operacional: Melhora UX
- M√©dio: Requer coordena√ß√£o de deploy

---

### CR-007: Carrossel Limitado a 7 Missas ‚Äî UX Degradada

**SEVERIDADE:** ALTA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `lib/data.ts` linha 36: `take: 365`
- Arquivo: `app/ui/dashboard/mass-carousel.tsx` linhas 80-150
- Refer√™ncia: PLAN-20260220-001 Task T6

**PROBLEMA:**
Carrossel renderiza todos os cards sem pagina√ß√£o no desktop. Sem navega√ß√£o prev/next. Limite de 365 missas pode ser pesado em conex√µes fracas.

**Verifica√ß√£o:**
```typescript
// lib/data.ts linha 36:
take: 365  // Sem limite de renderiza√ß√£o no carrossel
```

**A√á√ÉO EXIGIDA:**
1. Implementar pagina√ß√£o desktop no carrossel:
   - Mostrar 4 cards por vez
   - Bot√µes prev/next para navega√ß√£o
   - Indicador "X / Y" de posi√ß√£o
2. Melhorar indicadores mobile (dots + contador)
3. Adicionar anima√ß√£o suave entre p√°ginas
4. Testar: desktop com 50+ missas deve paginar corretamente

**IMPACTO:**
- T√©cnico: UX refactor
- Operacional: Melhora experi√™ncia
- M√©dio: Sem impacto em dados

---

### CR-008: Mobile UX ‚Äî Lista de Missas Sem Responsividade Adaptativa

**SEVERIDADE:** ALTA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `app/dashboard/masses/page.tsx` linhas 100-200
- Refer√™ncia: PLAN-20260220-001 Task T3

**PROBLEMA:**
Tabela HTML sem responsividade adaptativa. Bot√µes Editar/Excluir invis√≠veis em mobile (< 768px) sem scroll horizontal vis√≠vel.

**Verifica√ß√£o:**
```typescript
// masses/page.tsx:
// Tabela HTML convencional sem layout mobile
<table>
  <thead>
    <tr>
      <th>Data</th>
      <th>Tipo</th>
      <th>A√ß√µes</th>  {/* Invis√≠vel em mobile */}
    </tr>
  </thead>
</table>
```

**A√á√ÉO EXIGIDA:**
1. Adicionar layout condicional:
   - Desktop (>= 768px): tabela HTML atual
   - Mobile (< 768px): cards clic√°veis com a√ß√µes vis√≠veis
2. Implementar "OneClick Edit Mode":
   - Clicar no card navega para edi√ß√£o
   - Bot√£o de delete vis√≠vel em cada card
3. Testar: mobile com 10+ missas deve ser naveg√°vel

**IMPACTO:**
- T√©cnico: Layout refactor
- Operacional: Melhora UX mobile
- M√©dio: Sem impacto em dados

---

## ‚ö†Ô∏è PROBLEMAS M√âDIOS

### CR-009: Auto-save de Participantes Ausente ‚Äî Fric√ß√£o Operacional

**SEVERIDADE:** M√âDIA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `app/ui/tag-input.tsx` linhas 1-120
- Arquivo: `app/ui/masses/edit-form.tsx`
- Refer√™ncia: PLAN-20260220-001 Task T5

**PROBLEMA:**
TagInput exige submit de formul√°rio inteiro para salvar participantes. Sem Server Action para atualizar apenas participantes. Cria fric√ß√£o operacional.

**Verifica√ß√£o:**
```typescript
// tag-input.tsx:
// Sem callback de auto-save
interface TagInputProps {
    tags: string[];
    onTagsChange: (tags: string[]) => void;
    // Falta: onAutoSave?: (tags: string[]) => Promise<void>
}
```

**A√á√ÉO EXIGIDA:**
1. Criar Server Action `updateMassParticipants()` em `lib/actions.ts`:
   - Recebe `massId` e `participants`
   - Valida `tenantId` via session
   - Atualiza apenas campo `participants` (JSON)
   - Retorna `{ success: boolean; message?: string }`
2. Adicionar prop `onAutoSave` ao TagInput
3. Implementar debounce 300ms no cliente
4. Adicionar indicador visual: "salvando..." ‚Üí "salvo ‚úì" ‚Üí "erro ‚úó"
5. Testar: adicionar participante deve salvar automaticamente

**IMPACTO:**
- T√©cnico: Nova Server Action
- Operacional: Melhora UX
- M√©dio: Requer coordena√ß√£o

---

### CR-010: Datas Sugeridas Limitadas a 5 ‚Äî Reveal Progressivo Ausente

**SEVERIDADE:** M√âDIA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `app/ui/masses/create-form.tsx` linhas 360-380
- Refer√™ncia: PLAN-20260220-001 Task T4

**PROBLEMA:**
Datas sugeridas exibem apenas 5 (`.slice(0, 5)`). API retorna 10. Sem bot√£o "+" para reveal progressivo de mais 6 datas.

**Verifica√ß√£o:**
```typescript
// create-form.tsx linha 367:
suggestedDates.slice(0, 5)  // Hardcoded em 5
```

**A√á√ÉO EXIGIDA:**
1. Adicionar estado `visibleCount` iniciando em 6
2. Alterar requisi√ß√£o para `count: 30` (buffer)
3. Renderizar `.slice(0, visibleCount)`
4. Adicionar bot√£o "+" que incrementa `visibleCount += 6`
5. Bot√£o desaparece quando todas as datas est√£o vis√≠veis
6. Adicionar anima√ß√£o suave (transition CSS)
7. Testar: clicar "+" deve revelar mais 6 datas

**IMPACTO:**
- T√©cnico: UX enhancement
- Operacional: Melhora usabilidade
- Baixo: Sem impacto em dados

---

### CR-011: Race Condition em Participantes ‚Äî Edi√ß√£o Simult√¢nea Sobrescreve Dados

**SEVERIDADE:** M√âDIA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `prisma/schema.prisma` linha 54: `participants Json`
- Arquivo: `lib/actions.ts` fun√ß√£o `updateMassParticipants()`
- Refer√™ncia: PLAN-20260220-001 se√ß√£o 4.5

**PROBLEMA:**
Campo `participants` √© JSON monol√≠tico. Se dois usu√°rios editam participantes simultaneamente, o √∫ltimo a salvar sobrescreve o primeiro. Sem merge granular.

**Verifica√ß√£o:**
```prisma
// schema.prisma linha 54:
participants Json  // Monol√≠tico ‚Äî sem merge
```

**A√á√ÉO EXIGIDA:**
1. Implementar otimistic locking com campo `updatedAt`:
   - Antes de salvar, verificar se `updatedAt` do banco ainda corresponde ao carregado
   - Se divergir, exibir conflito: "Dados foram alterados por outro usu√°rio"
   - Permitir reload ou merge manual
2. Adicionar valida√ß√£o em `updateMassParticipants()`:
   ```typescript
   const currentMass = await prisma.mass.findUnique({ where: { id: massId } });
   if (currentMass.updatedAt !== loadedUpdatedAt) {
       return { success: false, message: 'Conflito de edi√ß√£o' };
   }
   ```
3. Testar: edi√ß√£o simult√¢nea deve detectar conflito

**IMPACTO:**
- T√©cnico: Prote√ß√£o contra race conditions
- Operacional: Evita perda de dados
- M√©dio: Requer coordena√ß√£o

---

### CR-012: Falta de Testes Automatizados ‚Äî Risco de Regress√µes

**SEVERIDADE:** M√âDIA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `package.json` (sem Jest, Vitest, Playwright)
- Refer√™ncia: `.Stack.md` se√ß√£o "Testing & Quality"

**PROBLEMA:**
Sem testes unit√°rios, E2E ou integra√ß√£o. Risco de regress√µes ao fazer mudan√ßas.

**A√á√ÉO EXIGIDA:**
1. Adicionar Jest para testes unit√°rios:
   - `npm install --save-dev jest @testing-library/react`
   - Criar `jest.config.js`
   - Adicionar script: `"test": "jest"`
2. Adicionar Playwright para testes E2E:
   - `npm install --save-dev @playwright/test`
   - Criar `playwright.config.ts`
   - Adicionar script: `"test:e2e": "playwright test"`
3. Criar testes para:
   - Server Actions (valida√ß√£o, erro handling)
   - Componentes cr√≠ticos (forms, carrossel)
   - Fluxos de usu√°rio (login, criar missa)
4. Adicionar CI/CD: GitHub Actions para rodar testes

**IMPACTO:**
- T√©cnico: Cobertura de testes
- Operacional: Confiabilidade aumentada
- M√©dio: Requer setup inicial

---

## ‚ö†Ô∏è PROBLEMAS BAIXOS

### CR-013: Vari√°veis de Ambiente Cr√≠ticas Sem Valores Padr√£o

**SEVERIDADE:** BAIXA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `.env.example` linhas 20-25
- Arquivo: `docker-compose.yml` linhas 30-40

**PROBLEMA:**
`AUTH_SECRET`, `JWT_SECRET`, `NEXTAUTH_SECRET` sem valores padr√£o. Falha silenciosa se n√£o configurado.

**A√á√ÉO EXIGIDA:**
1. Adicionar valida√ß√£o em `auth.ts`:
   ```typescript
   if (!process.env.AUTH_SECRET) {
       throw new Error('AUTH_SECRET deve estar configurado em .env');
   }
   ```
2. Adicionar script de gera√ß√£o de secrets:
   ```bash
   # scripts/generate-secrets.sh
   openssl rand -base64 32
   ```
3. Documentar em `README.md`: "Gerar secrets com `scripts/generate-secrets.sh`"
4. Testar: `npm run build` sem secrets deve falhar com mensagem clara

**IMPACTO:**
- T√©cnico: Valida√ß√£o de configura√ß√£o
- Operacional: Falha r√°pida em setup
- Baixo: N√£o afeta produ√ß√£o se configurado

---

### CR-014: Documenta√ß√£o de Deployment Incompleta ‚Äî Network Externa Requer Setup Manual

**SEVERIDADE:** BAIXA  
**TIPO:** A√á√ÉO OBRIGAT√ìRIA

**LOCAL:**
- Arquivo: `docker-compose.yml` linhas 50-55
- Arquivo: `.Stack.md` se√ß√£o "Docker Compose"

**PROBLEMA:**
Docker Compose usa network externa `kawatech-network` com IPs fixos. Requer setup manual antes de deploy. N√£o documentado claramente.

**Verifica√ß√£o:**
```yaml
# docker-compose.yml linha 50:
networks:
  kawatech-network:
    external: true  # Requer cria√ß√£o manual
    name: ${DOCKER_NETWORK_NAME}
```

**A√á√ÉO EXIGIDA:**
1. Adicionar documenta√ß√£o em `README.md`:
   ```markdown
   ## Setup Inicial
   
   1. Criar network Docker:
      docker network create kawatech-network
   
   2. Configurar .env com vari√°veis
   
   3. Deploy:
      docker-compose up -d
   ```
2. Adicionar script `scripts/setup-docker.sh`:
   ```bash
   docker network create kawatech-network || true
   ```
3. Atualizar `.Stack.md` com pr√©-requisitos expl√≠citos

**IMPACTO:**
- T√©cnico: Setup mais claro
- Operacional: Menos erros de deployment
- Baixo: Documenta√ß√£o

---

## üìä RESUMO POR CATEGORIA

### Arquitetura
- ‚úÖ Multi-tenancy bem implementada
- ‚úÖ Server Components por padr√£o
- ‚ö†Ô∏è Sem cache strategy granular
- ‚ö†Ô∏è Sem otimistic locking

### Stack
- ‚úÖ Moderno e bem mantido
- ‚ö†Ô∏è NextAuth v5 ainda em beta
- ‚ö†Ô∏è Prisma 7 WASM requer workarounds
- ‚ö†Ô∏è Sem monitoramento/observabilidade

### Conven√ß√µes
- ‚úÖ Bem documentadas
- ‚ö†Ô∏è Alguns `any` types (CR-005)
- ‚ö†Ô∏è Fun√ß√µes com nomenclatura enganosa (CR-001)
- ‚ö†Ô∏è Falta de exemplos de testes

### Seguran√ßa
- ‚úÖ Passwords hasheadas
- ‚úÖ JWT com expira√ß√£o
- ‚úÖ Middleware valida tenant
- ‚ö†Ô∏è Sem rate limiting
- ‚ö†Ô∏è Sem sanitiza√ß√£o HTML
- ‚ö†Ô∏è Sem audit logging
- ‚ö†Ô∏è Race conditions (CR-011)

### Performance
- ‚úÖ Output standalone otimizado (quando funciona)
- ‚úÖ PWA com cache strategies
- ‚ö†Ô∏è Carrossel renderiza todos os cards (CR-007)
- ‚ö†Ô∏è Query de 365 missas pode ser pesada
- ‚ö†Ô∏è Sem virtualiza√ß√£o

### Confiabilidade
- ‚úÖ Middleware com error handling
- ‚úÖ Fallback offline via PWA
- ‚ö†Ô∏è Sem retry logic
- ‚ö†Ô∏è Sem circuit breaker
- ‚ö†Ô∏è Sem health checks
- ‚ö†Ô∏è Falha silenciosa em config (CR-003)

---

## üéØ PLANO DE A√á√ÉO PRIORIT√ÅRIO

### Semana 1 (Cr√≠tico)
1. **CR-001**: Corrigir bug de data/hora (-3h)
2. **CR-002**: Documentar Prisma WASM workaround
3. **CR-003**: Adicionar valida√ß√£o de config de banco

### Semana 2 (Alto)
4. **CR-004**: Remover fun√ß√£o `utcToLocal()` incorreta
5. **CR-005**: Tipificar `config` no carrossel
6. **CR-006**: Tornar descri√ß√£o opcional (migration)
7. **CR-007**: Implementar pagina√ß√£o no carrossel

### Semana 3 (M√©dio)
8. **CR-008**: Responsividade mobile da lista de missas
9. **CR-009**: Auto-save de participantes
10. **CR-010**: Reveal progressivo de datas sugeridas
11. **CR-011**: Otimistic locking em participantes

### Semana 4+ (Baixo)
12. **CR-012**: Adicionar testes automatizados
13. **CR-013**: Valida√ß√£o de secrets
14. **CR-014**: Documenta√ß√£o de deployment

---

## ‚úÖ CONFIRMA√á√ïES FINAIS

- ‚úÖ Revis√£o em modo somente leitura
- ‚úÖ Nenhuma altera√ß√£o de c√≥digo realizada
- ‚úÖ Todos os problemas s√£o acion√°veis
- ‚úÖ Refer√™ncias √†s regras de governan√ßa inclu√≠das
- ‚úÖ Relat√≥rio persistido em `.Agent/.codereview/`

---

## üìû PR√ìXIMOS PASSOS

1. **AGENT_AUDITOR**: Revisar este relat√≥rio
2. **Stakeholders**: Priorizar problemas por impacto de neg√≥cio
3. **AGENT_EXECUTOR**: Implementar plano de a√ß√£o
4. **AGENT_AUDITOR**: Auditar implementa√ß√£o

---

**Relat√≥rio Gerado:** 2026-02-20 14:30  
**Arquivo:** `.Agent/.codereview/REVIEW-20260220-1430-GLOBAL.md`  
**Status:** ‚úÖ COMPLETO

